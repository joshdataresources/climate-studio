@import "tailwindcss";
@import "tw-animate-css";
@import "./design-system/tokens.css";

/* Explicitly define source paths for class detection */
@source "./**/*.{ts,tsx}";
@source "../../packages/climate-core/src/**/*.{ts,tsx}";

@custom-variant dark (&:is(.dark *));

/* Shared Global Styles - Widget Container Variables */
:root {
  --background: hsl(0 0% 8%);
  --foreground: hsl(0 0% 95%);
  --card: hsl(0 0% 12%);
  --card-foreground: hsl(0 0% 95%);
  --popover: hsl(0 0% 12%);
  --popover-foreground: hsl(0 0% 95%);
  --primary: hsl(264 100% 65%);
  --primary-foreground: hsl(0 0% 98%);
  --secondary: hsl(0 0% 18%);
  --secondary-foreground: hsl(0 0% 95%);
  --muted: hsl(0 0% 15%);
  --muted-foreground: hsl(0 0% 65%);
  --accent: hsl(0 0% 20%);
  --accent-foreground: hsl(0 0% 95%);
  --destructive: hsl(25 100% 60%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(0 0% 25%);
  --input: hsl(0 0% 18%);
  --ring: hsl(264 100% 65%);
  --chart-1: hsl(264 100% 65%);
  --chart-2: hsl(162 100% 70%);
  --chart-3: hsl(70 100% 75%);
  --chart-4: hsl(304 100% 60%);
  --chart-5: hsl(16 100% 65%);
  --radius: 0.5rem;
  --sidebar: hsl(0 0% 10%);
  --sidebar-foreground: hsl(0 0% 95%);
  --sidebar-primary: hsl(264 100% 65%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(0 0% 18%);
  --sidebar-accent-foreground: hsl(0 0% 95%);
  --sidebar-border: hsl(0 0% 25%);
  --sidebar-ring: hsl(264 100% 65%);

  /* Widget Container Variables - Global style for all widget panels */
  --widget-bg: rgba(30, 30, 30, 0.75);
  --widget-bg-panel: rgba(30, 30, 30, 0.75);
  --widget-border: rgba(255, 255, 255, 0.89);
  --widget-border-radius: 16px;
  --widget-padding: 1rem;
  --widget-backdrop-blur: blur(10px);
  --widget-box-shadow: 0 4px 25px 0 rgba(0, 0, 0, 0.10);

  /* Input/Form Control Variables - Match Search Button Style */
  --input-bg: rgba(40, 40, 40, 0.8);
  --input-border: rgba(0, 0, 0, 0.15);
  --input-border-radius: 0.375rem;
  /* rounded-md - matches Search button */
  --input-hover-bg: rgba(255, 255, 255, 0.1);
  /* hover:bg-white/10 - matches Search button */
  --input-hover-border: rgba(0, 0, 0, 0.15);
  --input-focus-bg: rgba(40, 40, 40, 0.8);
  --input-focus-border: #3b82f6;
  /* Blue border on focus - matches Search button */
  --input-focus-ring: rgba(59, 130, 246, 0.5);

  /* Button Variables - Default button style */
  --button-bg: rgba(40, 40, 40, 0.8);
  --button-border: rgba(0, 0, 0, 0.15);
  --button-border-radius: 0.375rem;
  /* rounded-md - matches Search button */
  --button-hover-bg: rgba(255, 255, 255, 0.1);
  --button-hover-border: rgba(0, 0, 0, 0.15);
  --button-focus-border: #3b82f6;
  --button-focus-ring: rgba(59, 130, 246, 0.5);
}

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    @apply bg-background text-foreground;
  }

  #root {
    height: 100%;
  }
}

@layer utilities {
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
 * WIDGET CONTAINER - Reusable style for all widget panels
 * ═══════════════════════════════════════════════════════════════════════════ */

.widget-container {
  position: relative;
  /* Required for backdrop-filter to work properly */
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-border);
  background: var(--widget-bg);
  -webkit-backdrop-filter: var(--widget-backdrop-blur);
  backdrop-filter: var(--widget-backdrop-blur);
  padding: var(--widget-padding);
  box-shadow: var(--widget-box-shadow);
  transform: translateZ(0);
  /* Smooth transitions for interactive states */
  transition:
    border-color 0.2s ease,
    box-shadow 0.2s ease;
}

/* Enhanced hover state for interactive widgets */
.widget-container:hover {
  border-color: rgba(255, 255, 255, 0.12);
}

/* Widget Container Variants */
.widget-container-sm {
  padding: calc(var(--widget-padding) * 0.5);
}

.widget-container-lg {
  padding: calc(var(--widget-padding) * 1.5);
}

.widget-container-no-padding {
  padding: 0;
}

/* Header style for widgets */
.widget-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 0.75rem;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.widget-title {
  font-size: 0.875rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

/* Widget content sections */
.widget-section {
  padding: 0.75rem 0;
}

.widget-section+.widget-section {
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

/* ═══════════════════════════════════════════════════════════════════════════
 * LAYER CARDS
 * ═══════════════════════════════════════════════════════════════════════════ */

.layer-card {
  display: flex;
  cursor: pointer;
  gap: 0.75rem;
  border-radius: 0.75rem;
  border: 1px solid rgba(255, 255, 255, 0.08);
  padding: 0.875rem;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  background: rgba(255, 255, 255, 0.02);
}

.layer-card:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.12);
}

.layer-card.active {
  background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.12) 0%,
      rgba(59, 130, 246, 0.06) 100%);
  border-color: rgba(59, 130, 246, 0.4);
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.1);
}

/* ═══════════════════════════════════════════════════════════════════════════
 * FEATURE CARDS (inset cards inside Features panel)
 * ═══════════════════════════════════════════════════════════════════════════ */

.feature-card {
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 0.5rem;
  padding: 0.75rem;
  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.03);
  transition: border-color 0.2s ease;
}

.feature-card:hover {
  border-color: rgba(255, 255, 255, 0.14);
}

.feature-card-title {
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  margin-bottom: 0.625rem;
}

/* Features panel divider between header and content */
.features-divider {
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

/* ═══════════════════════════════════════════════════════════════════════════
 * METRIC BADGES
 * ═══════════════════════════════════════════════════════════════════════════ */

.metric-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.625rem;
  border-radius: 9999px;
  font-size: 0.6875rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.metric-badge.success {
  background: rgba(16, 185, 129, 0.15);
  color: #34d399;
}

.metric-badge.warning {
  background: rgba(251, 191, 36, 0.15);
  color: #fbbf24;
}

.metric-badge.error {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
}

.metric-badge.info {
  background: rgba(59, 130, 246, 0.15);
  color: #60a5fa;
}

/* Input/Form Control Styles - Text boxes, combo boxes, dropdowns */
input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea,
select {
  border-radius: var(--input-border-radius);
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  transition: all 0.2s ease;
}

input[type="text"]:hover,
input[type="number"]:hover,
input[type="email"]:hover,
input[type="password"]:hover,
input[type="search"]:hover,
textarea:hover,
select:hover {
  background: var(--input-hover-bg);
  border-color: var(--input-hover-border);
}

input[type="text"]:focus,
input[type="text"]:focus-visible,
input[type="number"]:focus,
input[type="number"]:focus-visible,
input[type="email"]:focus,
input[type="email"]:focus-visible,
input[type="password"]:focus,
input[type="password"]:focus-visible,
input[type="search"]:focus,
input[type="search"]:focus-visible,
textarea:focus,
textarea:focus-visible,
select:focus,
select:focus-visible {
  background: var(--input-focus-bg);
  border-color: var(--input-focus-border);
  outline: none;
  box-shadow: 0 0 0 1px var(--input-focus-ring);
}

/* Radix UI Select Trigger styling */
[data-radix-select-trigger] {
  border-radius: var(--input-border-radius) !important;
  border: 1px solid var(--input-border) !important;
  background: var(--input-bg) !important;
  transition: all 0.2s ease !important;
}

[data-radix-select-trigger]:hover {
  background: var(--input-hover-bg) !important;
  border-color: var(--input-hover-border) !important;
}

[data-radix-select-trigger]:focus,
[data-radix-select-trigger][data-state="open"] {
  background: var(--input-focus-bg) !important;
  border-color: var(--input-focus-border) !important;
  box-shadow: 0 0 0 1px var(--input-focus-ring) !important;
}

/* Button Styles - Default button styling */
/* Apply to buttons that don't have explicit background colors set */
/* Exclude accordion buttons, text buttons (bg-transparent or border-0), and unstyled buttons */
button:not([class*="bg-primary"]):not([class*="bg-destructive"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-[rgba"]):not([class*="bg-transparent"]):not([class*="border-0"]):not(.accordion-trigger):not(.unstyled-btn) {
  border-radius: var(--button-border-radius);
  border: 1px solid var(--button-border);
  background: var(--button-bg);
  transition: all 0.2s ease;
}

button:not([class*="bg-primary"]):not([class*="bg-destructive"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-[rgba"]):not([class*="bg-transparent"]):not([class*="border-0"]):not(.accordion-trigger):not(.unstyled-btn):hover:not(:disabled) {
  background: var(--button-hover-bg);
  border-color: var(--button-hover-border);
}

button:not([class*="bg-primary"]):not([class*="bg-destructive"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-[rgba"]):not([class*="bg-transparent"]):not([class*="border-0"]):not(.accordion-trigger):not(.unstyled-btn):focus,
button:not([class*="bg-primary"]):not([class*="bg-destructive"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-[rgba"]):not([class*="bg-transparent"]):not([class*="border-0"]):not(.accordion-trigger):not(.unstyled-btn):focus-visible,
button:not([class*="bg-primary"]):not([class*="bg-destructive"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-red"]):not([class*="bg-[rgba"]):not([class*="bg-transparent"]):not([class*="border-0"]):not(.accordion-trigger):not(.unstyled-btn)[aria-expanded="true"] {
  border-color: var(--button-focus-border);
  outline: none;
  box-shadow: 0 0 0 1px var(--button-focus-ring);
}

/* Accordion Trigger - Clean unstyled button for accordion headers */
.accordion-trigger {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Radix UI Select Trigger (button) styling - Override inline styles */
[data-radix-select-trigger],
button[role="combobox"] {
  border-radius: var(--button-border-radius) !important;
  border: 1px solid var(--button-border) !important;
  background: var(--button-bg) !important;
  transition: all 0.2s ease !important;
}

[data-radix-select-trigger]:hover:not(:disabled),
button[role="combobox"]:hover:not(:disabled) {
  background: var(--button-hover-bg) !important;
  border-color: var(--button-hover-border) !important;
}

[data-radix-select-trigger]:focus,
[data-radix-select-trigger]:focus-visible,
[data-radix-select-trigger][data-state="open"],
button[role="combobox"]:focus,
button[role="combobox"]:focus-visible,
button[role="combobox"][aria-expanded="true"] {
  border-color: var(--button-focus-border) !important;
  box-shadow: 0 0 0 1px var(--button-focus-ring) !important;
}

/* App-specific styles */
/* Leaflet map dragging support */
.leaflet-container {
  cursor: grab;
}

.leaflet-grab {
  cursor: grab;
}

.leaflet-dragging .leaflet-container,
.leaflet-dragging .leaflet-grab {
  cursor: grabbing !important;
}

.leaflet-interactive {
  cursor: pointer;
}

.leaflet-container a {
  cursor: pointer;
}

/* Carto dark basemap with blue water customization */
.carto-basemap-blue-water {
  filter: sepia(0.15) saturate(1.8) hue-rotate(180deg) brightness(0.95);
}


/* Mapbox Control Buttons - Style to match GUI buttons */
.mapboxgl-ctrl-group {
  border-radius: var(--button-border-radius) !important;
  border: 1px solid var(--button-border) !important;
  background: var(--button-bg) !important;
  -webkit-backdrop-filter: var(--widget-backdrop-blur);
  backdrop-filter: var(--widget-backdrop-blur);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  overflow: hidden;
  margin-bottom: 16px !important;
  margin-right: 16px !important;
}

.mapboxgl-ctrl-group button {
  border-radius: 0 !important;
  border: none !important;
  border-bottom: 1px solid var(--button-border) !important;
  background: transparent !important;
  color: var(--foreground) !important;
  width: 29px !important;
  height: 29px !important;
  transition: all 0.2s ease !important;
}

/* Make zoom +/- icons white */
.mapboxgl-ctrl-group button .mapboxgl-ctrl-icon {
  filter: brightness(0) invert(1) !important;
}

.mapboxgl-ctrl-group button:last-child {
  border-bottom: none !important;
}

.mapboxgl-ctrl-group button:hover:not(:disabled) {
  background: var(--button-hover-bg) !important;
}

.mapboxgl-ctrl-group button:active:not(:disabled),
.mapboxgl-ctrl-group button:focus:not(:disabled) {
  background: var(--button-focus-bg) !important;
  border-color: var(--button-focus-border) !important;
  outline: none !important;
  box-shadow: inset 0 0 0 1px var(--button-focus-ring) !important;
}

.mapboxgl-ctrl-group button:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

/* Scale control - hidden */
.mapboxgl-ctrl.mapboxgl-ctrl-scale {
  display: none !important;
}

/* Hide default top-right controls - we use NavigationControl with position="bottom-right" */
.mapboxgl-ctrl-top-right {
  display: none !important;
}

/* Hide Mapbox attribution */
.mapboxgl-ctrl-attrib {
  display: none !important;
}

/* Hide Mapbox logo */
.mapboxgl-ctrl-logo {
  display: none !important;
}

/* Mapbox canvas positioning adjustments */

.mapboxgl-map {
  margin: 0 !important;
  padding: 0 !important;
}

.mapboxgl-canvas-container {
  margin: 0 !important;
  padding: 0 !important;
}

/* ═══════════════════════════════════════════════════════════════════════════
 * LIGHT THEME OVERRIDES
 * ═══════════════════════════════════════════════════════════════════════════ */

[data-theme="light"],
.light {
  /* Text/Foreground Colors - Light Theme (darker for contrast) */
  --foreground: hsl(222 47% 11%);
  /* slate-900 - very dark */
  --card-foreground: hsl(222 47% 11%);
  /* slate-900 */
  --popover-foreground: hsl(222 47% 11%);
  /* slate-900 */
  --primary-foreground: hsl(0 0% 98%);
  /* white for primary buttons */
  --secondary-foreground: hsl(222 47% 11%);
  /* slate-900 */
  --muted-foreground: hsl(215 16% 47%);
  /* slate-600 - medium dark */
  --accent-foreground: hsl(222 47% 11%);
  /* slate-900 */
  --destructive-foreground: hsl(0 0% 98%);
  /* white */
  --sidebar-foreground: hsl(222 47% 11%);
  /* slate-900 */
  --sidebar-primary-foreground: hsl(0 0% 98%);
  /* white */
  --sidebar-accent-foreground: hsl(222 47% 11%);
  /* slate-900 */

  /* Background Colors - Light Theme */
  --background: hsl(210 40% 98%);
  /* slate-50 - very light */
  --card: hsl(0 0% 100%);
  /* white */
  --popover: hsl(0 0% 100%);
  /* white */
  --muted: hsl(210 40% 96%);
  /* slate-100 */
  --accent: hsl(210 40% 96%);
  /* slate-100 */
  --border: hsl(214 32% 91%);
  /* slate-200 */
  --input: hsl(214 32% 91%);
  /* slate-200 */
  --sidebar: hsl(210 40% 98%);
  /* slate-50 */
  --sidebar-border: hsl(214 32% 91%);
  /* slate-200 */

  /* Widget Container Variables - Light Theme */
  --widget-bg: rgba(255, 255, 255, 0.75);
  --widget-bg-panel: rgba(255, 255, 255, 0.75);
  --widget-border: rgba(255, 255, 255, 0.89);
  --widget-border-radius: 16px;
  --widget-backdrop-blur: blur(10px);
  --widget-box-shadow: 0 4px 25px 0 rgba(0, 0, 0, 0.10);

  /* Input/Form Control Variables - Light Theme */
  --input-bg: rgba(248, 250, 252, 1);
  /* slate-50 */
  --input-border: rgba(0, 0, 0, 0.15);
  --input-hover-bg: rgba(241, 245, 249, 1);
  /* slate-100 */
  --input-hover-border: rgba(0, 0, 0, 0.15);
  --input-focus-bg: rgba(255, 255, 255, 1);
  --input-focus-border: #437efc;
  /* brand-primary */
  --input-focus-ring: rgba(67, 126, 252, 0.2);

  /* Button Variables - Light Theme */
  --button-bg: rgba(255, 255, 255, 1);
  --button-border: rgba(0, 0, 0, 0.15);
  --button-hover-bg: rgba(241, 245, 249, 1);
  /* slate-100 */
  --button-hover-border: rgba(0, 0, 0, 0.15);
  --button-focus-border: #437efc;
  --button-focus-ring: rgba(67, 126, 252, 0.2);

  /* Widget hover state - Light Theme */
  .widget-container:hover {
    border-color: rgba(255, 255, 255, 1);
    /* white */
  }

  /* Widget header - Light Theme */
  .widget-header {
    border-bottom: 1px solid rgba(226, 232, 240, 1);
    /* slate-200 */
  }
}

[data-theme="light"] .widget-container:hover,
.light .widget-container:hover {
  border-color: rgba(255, 255, 255, 1);
  /* white */
}

[data-theme="light"] .widget-header,
.light .widget-header {
  border-bottom: 1px solid rgba(226, 232, 240, 1);
  /* slate-200 */
}

[data-theme="light"] .widget-section+.widget-section,
.light .widget-section+.widget-section {
  border-top: 1px solid rgba(226, 232, 240, 1);
  /* slate-200 */
}

[data-theme="light"] .layer-card,
.light .layer-card {
  border: 1px solid rgba(226, 232, 240, 1);
  /* slate-200 */
  background: rgba(248, 250, 252, 1);
  /* slate-50 */
}

[data-theme="light"] .layer-card:hover,
.light .layer-card:hover {
  background: rgba(241, 245, 249, 1);
  /* slate-100 */
  border-color: rgba(203, 213, 225, 1);
  /* slate-300 */
}

[data-theme="light"] .layer-card.active,
.light .layer-card.active {
  background: linear-gradient(135deg,
      rgba(67, 126, 252, 0.12) 0%,
      rgba(67, 126, 252, 0.06) 100%);
  border-color: rgba(67, 126, 252, 0.3);
  box-shadow: 0 0 20px rgba(67, 126, 252, 0.1);
}


/* Light theme feature cards */
[data-theme="light"] .feature-card,
.light .feature-card {
  background: rgba(255, 255, 255, 0.25);
  border: 1px solid rgba(255, 255, 255, 1);
  box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.03);
}

[data-theme="light"] .feature-card:hover,
.light .feature-card:hover {
  border-color: rgba(226, 232, 240, 1);
}

[data-theme="light"] .features-divider,
.light .features-divider {
  border-color: rgba(0, 0, 0, 0.12);
}

/* Input hover states for light theme */
[data-theme="light"] input:hover,
.light input:hover {
  background-color: var(--input-hover-bg);
  border-color: var(--input-hover-border);
}

[data-theme="light"] input:focus,
.light input:focus {
  background-color: var(--input-focus-bg);
  border-color: var(--input-focus-border);
  outline: 2px solid var(--input-focus-ring);
  outline-offset: 2px;
}

/* Slider track styles - Default (dark theme) */
[data-radix-slider-track],
span[data-radix-slider-track] {
  background-color: rgba(63, 63, 63, 1) !important;
  /* neutral-700 for dark theme */
}

/* Slider light theme styles */
[data-theme="light"] [data-radix-slider-track],
[data-theme="light"] span[data-radix-slider-track],
.light [data-radix-slider-track],
.light span[data-radix-slider-track] {
  background-color: rgba(67, 126, 252, 0.25) !important;
  /* 25% opacity of --cs-brand-primary (#437efc) */
}

[data-theme="light"] [data-radix-slider-track]:hover,
[data-theme="light"] span[data-radix-slider-track]:hover,
.light [data-radix-slider-track]:hover,
.light span[data-radix-slider-track]:hover {
  background-color: rgba(67, 126, 252, 0.25) !important;
  /* 25% opacity of --cs-brand-primary */
}

[data-theme="light"] [data-radix-slider-range],
.light [data-radix-slider-range] {
  background: linear-gradient(to right, rgba(59, 130, 246, 0.7), rgba(96, 165, 250, 0.7)) !important;
  /* translucent blue-500 to blue-400 */
}

[data-theme="light"] [data-radix-slider-thumb],
.light [data-radix-slider-thumb] {
  background-color: white !important;
  border-color: rgb(59, 130, 246) !important;
  /* blue-500 */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] [data-radix-slider-thumb]:hover,
.light [data-radix-slider-thumb]:hover {
  border-color: rgb(37, 99, 235) !important;
  /* blue-600 */
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
}

/* Mapbox control icons - Darker in light mode */
[data-theme="light"] .mapboxgl-ctrl-group button .mapboxgl-ctrl-icon,
.light .mapboxgl-ctrl-group button .mapboxgl-ctrl-icon {
  filter: brightness(0) !important;
  /* Make icons black/dark */
}

/* Remove shadows from buttons and form elements in light theme */
[data-theme="light"] button,
.light button {
  box-shadow: none !important;
}

[data-theme="light"] input,
[data-theme="light"] textarea,
[data-theme="light"] select,
.light input,
.light textarea,
.light select {
  box-shadow: none !important;
}

/* Remove border on unselected layer cards in light theme */
[data-theme="light"] .widget-container label.border:not(.border-blue-500\/60),
.light .widget-container label.border:not(.border-blue-500\/60) {
  border-color: transparent !important;
}

/* ═══════════════════════════════════════════════════════════════════════════
 * METRO HUMIDITY POPUP STYLES
 * ═══════════════════════════════════════════════════════════════════════════ */

/* Remove Mapbox default popup styles */
.metro-humidity-popup .mapboxgl-popup-content {
  background: transparent !important;
  padding: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

.metro-humidity-popup .mapboxgl-popup-tip {
  border-top-color: rgba(255, 255, 255, 0.5) !important;
  border-bottom-color: rgba(255, 255, 255, 0.5) !important;
  border-left-color: rgba(255, 255, 255, 0.5) !important;
  border-right-color: rgba(255, 255, 255, 0.5) !important;
}